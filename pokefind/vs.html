<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>VS Battle | Pok√©Finder</title>

  <link href="https://fonts.googleapis.com/css2?family=Bangers&family=Architects+Daughter&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="shared.css">
</head>

<body>

<header class="header">
  <div class="title-sticker">VS BATTLE</div>

  <nav class="top-nav">
    <button class="nav-sticker" data-target="buscar">üîé Buscar</button>
    <button class="nav-sticker" data-target="historico">üìú Hist√≥rico</button>
    <button class="nav-sticker" data-target="vs">‚öîÔ∏è VS</button>
    <button class="nav-sticker" data-target="favoritos">‚ù§Ô∏è Favoritos</button>
  </nav>
</header>

<main style="display:flex; justify-content:center; margin-top:40px;">
  <div style="width:90%; max-width:1100px;">

    <div class="pokemon-card-comic" style="justify-content:center; font-size:26px;">
      Elige dos Pok√©mon para luchar
    </div>

    <div style="display:flex; gap:24px; margin-top:30px; justify-content:center; flex-wrap:wrap;">

      <!-- Panel A -->
      <div class="pokemon-card-comic" style="width:420px;">
        <h2 style="font-family:var(--font-title);">Jugador 1</h2>
        <input id="pokeA" type="text" placeholder="Nombre o ID" style="width:100%; margin-top:12px;">
        <button id="btnA" class="big-button" style="margin-top:12px; width:100%;">Cargar</button>
        <div id="cardA" style="margin-top:18px;"></div>
      </div>

      <!-- Panel B -->
      <div class="pokemon-card-comic" style="width:420px;">
        <h2 style="font-family:var(--font-title);">Jugador 2</h2>
        <input id="pokeB" type="text" placeholder="Nombre o ID" style="width:100%; margin-top:12px;">
        <button id="btnB" class="big-button" style="margin-top:12px; width:100%;">Cargar</button>
        <div id="cardB" style="margin-top:18px;"></div>
      </div>

    </div>

    <div style="text-align:center; margin-top:40px;">
      <button id="fightBtn" class="big-button" style="font-size:26px;">¬°PELEAR!</button>
    </div>

    <div id="vsResult" style="margin-top:30px;"></div>

  </div>
</main>

<script src="shared.js"></script>
<script>
let pokemonA = null;
let pokemonB = null;

function renderMiniCard(poke){
  return `
    <div style="display:flex; gap:16px; align-items:center;">
      <img src="${poke.sprites.front_default}" width="80">
      <div>
        <div style="font-weight:bold;">#${poke.id} - ${poke.name.toUpperCase()}</div>
        <div>HP: ${poke.stats[0].base_stat}</div>
        <div>ATK: ${poke.stats[1].base_stat}</div>
      </div>
    </div>
  `;
}

async function fetchPokemon(name){
  const res = await fetch("https://pokeapi.co/api/v2/pokemon/"+name.toLowerCase());
  if(!res.ok) throw new Error("No encontrado");
  return res.json();
}

document.getElementById("btnA").addEventListener("click", async()=>{
  try{
    const q = document.getElementById("pokeA").value.trim();
    if (!q) return;
    const p = await fetchPokemon(q);
    pokemonA = p;
    document.getElementById("cardA").innerHTML = renderMiniCard(p);
  }catch(e){ alert("Pok√©mon A no encontrado"); }
});

document.getElementById("btnB").addEventListener("click", async()=>{
  try{
    const q = document.getElementById("pokeB").value.trim();
    if (!q) return;
    const p = await fetchPokemon(q);
    pokemonB = p;
    document.getElementById("cardB").innerHTML = renderMiniCard(p);
  }catch(e){ alert("Pok√©mon B no encontrado"); }
});

document.getElementById("fightBtn").addEventListener("click",()=>{
  if (!pokemonA || !pokemonB){
    alert("Debes cargar ambos Pok√©mon antes de pelear");
    return;
  }

  const atkA = pokemonA.stats[1].base_stat;
  const atkB = pokemonB.stats[1].base_stat;

  let ganador = "";
  if (atkA > atkB) ganador = pokemonA.name.toUpperCase();
  else if (atkB > atkA) ganador = pokemonB.name.toUpperCase();
  else ganador = "EMPATE";

  document.getElementById("vsResult").innerHTML = `
    <div class="pokemon-card-comic" style="font-size:22px; text-align:center;">
      Resultado: <strong>${ganador}</strong>
    </div>
  `;
});
</script>

</body>
</html>
